(this.webpackJsonpcelogram=this.webpackJsonpcelogram||[]).push([[0],{403:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"},{"internalType":"string","name":"_description","type":"string"}],"name":"addComment","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"getPost","outputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"string","name":"","type":"string"},{"internalType":"string","name":"","type":"string"},{"internalType":"string","name":"","type":"string"},{"internalType":"uint256","name":"","type":"uint256"},{"components":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"string","name":"description","type":"string"}],"internalType":"struct Celogram.Comment[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getPostsLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"likePost","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_image","type":"string"},{"internalType":"string","name":"_title","type":"string"},{"internalType":"string","name":"_description","type":"string"}],"name":"newPost","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"},{"internalType":"uint256","name":"_ammount","type":"uint256"}],"name":"sendTip","outputs":[],"stateMutability":"payable","type":"function"}]')},404:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')},412:function(e,t,n){},414:function(e,t,n){},430:function(e,t){},431:function(e,t){},433:function(e,t){},437:function(e,t){},461:function(e,t){},463:function(e,t){},477:function(e,t){},479:function(e,t){},507:function(e,t){},509:function(e,t){},526:function(e,t){},527:function(e,t){},600:function(e,t){},601:function(e,t){},693:function(e,t){},698:function(e,t){},880:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(59),c=n.n(s),i=(n(412),n(69)),o=n(18),u=n(24),l=n.n(u),p=(n(414),n(889)),d=n(883),m=n(888),b=n(884),j=n(885),y=n(891),f=n(890),x=n(398),h=n(1),O=function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(""),i=Object(o.a)(c,2),u=i[0],l=i[1],O=Object(a.useState)(""),v=Object(o.a)(O,2),g=v[0],T=v[1],w=Object(a.useState)(!1),k=Object(o.a)(w,2),C=k[0],S=k[1],N=function(){return S(!1)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(p.a,{bg:"light",children:Object(h.jsxs)(d.a,{children:[Object(h.jsx)(p.a.Brand,{href:"#home",children:"Celogram"}),Object(h.jsx)(p.a.Toggle,{}),Object(h.jsx)(m.a,{className:"me-auto",children:Object(h.jsxs)(b.a,{bg:"secondary",className:"ms-auto",children:["Balance ",e.cUSDBalance,"cUSD"]})}),Object(h.jsx)(p.a.Collapse,{className:"justify-content-end",children:Object(h.jsx)(j.a,{onClick:function(){return S(!0)},variant:"dark",children:Object(h.jsx)("h5",{children:" Add a New Post "})})})]})}),Object(h.jsxs)(y.a,{show:C,onHide:N,centered:!0,children:[Object(h.jsx)(y.a.Header,{closeButton:!0,children:Object(h.jsx)(y.a.Title,{children:"New Post"})}),Object(h.jsx)(f.a,{children:Object(h.jsxs)(y.a.Body,{children:[Object(h.jsx)(x.a,{controlId:"inputImage",label:"Image",className:"mb-3",children:Object(h.jsx)(f.a.Control,{type:"text",onChange:function(e){s(e.target.value)},placeholder:"Image"})}),Object(h.jsx)(x.a,{controlId:"inputTitle",label:"title of post",className:"mb-3",children:Object(h.jsx)(f.a.Control,{type:"text",onChange:function(e){l(e.target.value)},placeholder:"title of post"})}),Object(h.jsx)(x.a,{controlId:"inputDescription",label:"Description",className:"mb-3",children:Object(h.jsx)(f.a.Control,{as:"textarea",placeholder:"description",style:{height:"80px"},onChange:function(e){T(e.target.value)}})})]})}),Object(h.jsxs)(y.a.Footer,{children:[Object(h.jsx)(j.a,{variant:"outline-secondary",onClick:N,children:"Close"}),Object(h.jsx)(j.a,{variant:"dark",disabled:!(r&&u&&g),onClick:function(){e.addPost(r,u,g),N()},children:"Add Post"})]})]})]})},v=n(886),g=n(397),T=n(892),w=n(893),k=function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(""),i=Object(o.a)(c,2),u=i[0],l=i[1];return Object(h.jsx)(v.a,{xs:1,md:3,className:"g-4",children:e.posts.map((function(t){return Object(h.jsx)(g.a,{children:Object(h.jsxs)(T.a,{className:"h-100",children:[Object(h.jsx)(T.a.Header,{children:Object(h.jsxs)(w.a,{direction:"horizontal",gap:2,children:[Object(h.jsxs)(b.a,{bg:"secondary",className:"ms-auto",children:[t.index," ID"]}),Object(h.jsxs)(b.a,{bg:"secondary",className:"ms-auto",children:[t.likes," Likes"]})]})}),Object(h.jsx)("div",{className:" ratio ratio-4x3",children:Object(h.jsx)("img",{src:t.image,alt:t.description,style:{objectFit:"cover"}})}),Object(h.jsxs)(T.a.Body,{className:"d-flex  flex-column text-center",children:[Object(h.jsx)(T.a.Title,{children:t.title}),Object(h.jsx)(T.a.Text,{className:"flex-grow-1",children:t.description}),Object(h.jsx)(j.a,{variant:"primary mt-2",onClick:function(){return e.like(t.index)},children:"Like this post"}),Object(h.jsx)("form",{children:Object(h.jsxs)("div",{class:"form-r",children:[Object(h.jsx)("input",{type:"text",class:"form-control mt-3",value:r,onChange:function(e){return s(e.target.value)},placeholder:"enter comment"}),Object(h.jsx)("button",{type:"button",onClick:function(){return e.addComment(t.index,r)},class:"btn btn-dark mt-1",children:"Comment on this post"})]})}),Object(h.jsx)("form",{children:Object(h.jsxs)("div",{class:"form-r",children:[Object(h.jsx)("input",{type:"number",class:"form-control mt-3",value:u,onChange:function(e){return l(e.target.value)},placeholder:"enter ammount"}),Object(h.jsx)("button",{type:"button",onClick:function(){return e.sendTip(t.index,u)},class:"btn btn-dark mt-1",children:"Send Tip(cUSD)"})]})}),Object(h.jsx)("h2",{className:"mt-3",children:"Comments"}),e.walletAddress===t.user&&t.comments.map((function(e){return Object(h.jsxs)("p",{class:"card-text ",children:[e.description," ",Object(h.jsx)("hr",{})]})}))]})]})},t.index)}))})},C=n(399),S=n.n(C),N=n(402),P=n(403),F=n(404),M="0x2d6dcdA3A131Dc4819EF572c6CE5A0c573E7175E";var A=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(null),c=Object(o.a)(s,2),u=c[0],p=c[1],d=Object(a.useState)(null),m=Object(o.a)(d,2),b=m[0],j=m[1],y=Object(a.useState)(0),f=Object(o.a)(y,2),x=f[0],v=f[1],g=Object(a.useState)([]),T=Object(o.a)(g,2),w=T[0],C=T[1],A=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.celo){e.next=22;break}return e.prev=1,e.next=4,window.celo.enable();case 4:return t=new S.a(window.celo),n=Object(N.newKitFromWeb3)(t),e.next=8,n.web3.eth.getAccounts();case 8:return a=e.sent,r=a[0],n.defaultAccount=r,e.next=13,p(r);case 13:return e.next=15,j(n);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0);case 20:e.next=23;break;case 22:alert("Error Occurred");case 23:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}(),B=Object(a.useCallback)(Object(i.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.getTotalBalance(u);case 3:t=e.sent,n=t.cUSD.shiftedBy(-18).toFixed(2),a=new b.web3.eth.Contract(P,M),r(a),v(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[u,b]),D=Object(a.useCallback)(Object(i.a)(l.a.mark((function e(){var t,a,r,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methods.getPostsLength().call();case 2:for(t=e.sent,a=[],r=function(e){var t=new Promise(function(){var t=Object(i.a)(l.a.mark((function t(a,r){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.methods.getPost(e).call();case 2:s=t.sent,a({index:e,user:s[0],image:s[1],title:s[2],description:s[3],likes:s[4],comments:s[5]});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());a.push(t)},s=0;s<t;s++)r(s);return e.next=8,Promise.all(a);case 8:c=e.sent,C(c);case 10:case"end":return e.stop()}}),e)}))),[n]),E=function(){var e=Object(i.a)(l.a.mark((function e(t,a,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.methods.newPost(t,a,r).send({from:u});case 3:D(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,a){return e.apply(this,arguments)}}(),I=function(){var e=Object(i.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.methods.addComment(t,a).send({from:u});case 3:D(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.methods.likePost(t).send({from:u});case 3:D(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(i.a)(l.a.mark((function e(t,a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new b.web3.eth.Contract(F,"0x874069Fa1Eb16D44d622F2e0Ca25eeA172369bC1"),e.next=4,r.methods.approve(M,a).send({from:u});case 4:return e.next=6,n.methods.sendTip(t,a).send({from:u});case 6:D(),B(),alert("you have successfully sent cusd to this user"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),alert(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){A()}),[]),Object(a.useEffect)((function(){b&&u&&B()}),[b,u,B]),Object(a.useEffect)((function(){n&&D()}),[n,D]),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(O,{cUSDBalance:x,addPost:E}),Object(h.jsx)(k,{posts:w,likePost:_,addComment:I,sendTip:L,walletAddress:u})]})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,894)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};n(876),n(877);c.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(A,{})}),document.getElementById("root")),B()}},[[880,1,2]]]);
//# sourceMappingURL=main.a1371190.chunk.js.map